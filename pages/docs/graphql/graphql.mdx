# Fetching Data Using GraphQL

## Using `graphql-request`

1. **Install the library**:

   ```bash js copy
   npm install graphql-request
   ```

2.**Query the data**:

Hereâ€™s how to query various resources like products, product, collections, collection, categories, and category using GraphQL.

```js copy
import { gql, request } from "graphql-request";

const storeId = "your-store-id";
const baseUrl = "https://abacus-psi.vercel.app/graphql";
```

## Fetch All Products

    ```js copy

const PRODUCTS_QUERY = gql` 
   query GetProducts($storeId: String!) {
        products(storeId: $storeId) {
            id
            title
            // others
        }
    }`;

async function fetchProducts(storeId) {
const variables = { storeId };

    try {
        const response = await request(baseUrl, PRODUCTS_QUERY, variables);
        const data = response.products;
        console.log(data);

    } catch (error) {
        console.error("Error fetching products:", error);
    }

}

fetchProducts(storeId);

    ```

## Fetch a Single Product

```js copy
const PRODUCT_QUERY = gql`
	query GetProduct($storeId: String!, $productId: String!) {
		product(storeId: $storeId, productId: $productId) {
			id
			title
			description
            // others
		}
	}
`;

async function fetchProduct(storeId, productId) {
	const variables = { storeId, productId };

	try {
		const response = await request(baseUrl, PRODUCT_QUERY, variables);
		const data = response.product;
		console.log(data);
	} catch (error) {
		console.error("Error fetching product:", error);
	}
}

fetchProduct(storeId, "your-product-id");
```

## Fetch All Categories

```js copy
const CATEGORIES_QUERY = gql`
	query GetCategories($storeId: String!) {
		categories(storeId: $storeId) {
			id
			name
            // others
		}
	}
`;

async function fetchCategories(storeId) {
	const variables = { storeId };

	try {
		const response = await request(baseUrl, CATEGORIES_QUERY, variables);
		const data = response.categories;
		console.log(data);
	} catch (error) {
		console.error("Error fetching categories:", error);
	}
}

fetchCategories(storeId);
```

### Fetch a Single Category

```js copy
const CATEGORY_QUERY = gql`
	query GetCategory($storeId: String!, $categoryId: String!) {
		category(storeId: $storeId, categoryId: $categoryId) {
			id
			name
			description
            // others
		}
	}
`;

async function fetchCategory(storeId, categoryId) {
	const variables = { storeId, categoryId };

	try {
		const response = await request(baseUrl, CATEGORY_QUERY, variables);
		const data = response.category;
		console.log(data);
	} catch (error) {
		console.error("Error fetching category:", error);
	}
}

fetchCategory(storeId, "your-category-id");
```

### Fetch All Collections

```js copy
const COLLECTIONS_QUERY = gql`
	query GetCollections($storeId: String!) {
		collections(storeId: $storeId) {
			id
			name
            // others
		}
	}
`;

async function fetchCollections(storeId) {
	const variables = { storeId };

	try {
		const response = await request(baseUrl, COLLECTIONS_QUERY, variables);
		const data = response.collections;
		console.log(data);
	} catch (error) {
		console.error("Error fetching collections:", error);
	}
}

fetchCollections(storeId);
```

### Fetch Single Collection

```js copy
const COLLECTION_QUERY = gql`
	query GetCollection($storeId: String!, $collectionId: String!) {
		collection(storeId: $storeId, collectionId: $collectionId) {
			id
			name
			description
            // others
		}
	}
`;

async function fetchCollection(storeId, collectionId) {
	const variables = { storeId, collectionId };

	try {
		const response = await request(baseUrl, COLLECTION_QUERY, variables);
		const data = response.collection;
		console.log(data);
	} catch (error) {
		console.error("Error fetching collection:", error);
	}
}

fetchCollection(storeId, "your-collection-id");
```
